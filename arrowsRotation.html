<html>
<head>
<script type="text/javascript">
	var c;// Canvas context
	var H,W;
		function main(){
			var d=document.getElementById("canvas");
			H=d.height;
			W=d.width;
			c=d.getContext("2d");// defining canvas parameters
		 	c.strokeRect(0,0,W,H);
shiftRotate(c);
}//end main
function shiftRotate(c){
var x = [200,200,195,205],//points of Arrow <-
	y = [-15,15, 0,0],
	i,j,pi,phi,cos_phi,sin_phi,dx,dy, //dx=x[i]-x0...
	x0=300,y0=300,  r=10;     // Pivot shifting coords	& radius
	
	
	
	
		c.strokeStyle='red'; //drawing initial red arrow
		c.beginPath();
		c.moveTo(x[0],y[0]); 
		for(j=1;j<=3;j++)
		c.lineTo(x[j],y[j]);
	 	c.lineTo(x[1],y[1]);
		c.stroke();          
	
	c.beginPath();		         	//drawing povot
	c.arc(x0,y0,10, 0,2*Math.PI,true);
	c.fill();

	
	/* mowing to start position (x0+r, y0):*/
	for(i=0;i<4;i++){x[i]+=x0; y[i]+=y0;}
	//alert(x[1]);
	
	
		c.strokeStyle='blue';
		c.beginPath();
		c.moveTo(x[0],y[0]); 
		for(j=1;j<=3;j++)
		c.lineTo(x[j],y[j]);
	 	c.lineTo(x[1],y[1]);
		c.stroke();          //drawing initial blue arrow
	
	pi=4*Math.atan(1);  //pi=3.141592653589793
	phi=12*pi/180;       //rotation angle in deg
	cos_phi=Math.cos(phi);	sin_phi=Math.sin(phi);


	for(i=1;i<=29;i++){    //number of iteraions
	 	
		  	
			for(j=0;j<4;j++){ 			 //rotating all 4 points
				//alert(x[0]);
				dx=x[j]-x0; dy=y[j]-y0;        //shifted coords
				x[j]=x0+dx*cos_phi-dy*sin_phi; //new coords
				y[j]=y0+dx*sin_phi+dy*cos_phi;
				}
			
	    //Building rotated arrow
	  	c.strokeStyle='green';
	 	if(i%2==0){c.strokeStyle='magenta';}//just for fun
		c.beginPath();	
		c.moveTo(x[0],y[0]);
		for(j=1;j<=3;j++)
		c.lineTo(x[j],y[j]);
		c.lineTo(x[1],y[1]);//closing path
		c.fill();       
		c.stroke();         //Drawing rotated arrow
	}
    
}//end function


</script>
</head>
<body onload="main()">
<canvas id="canvas" width="800" height="750">
	Ваш браузер не поддерживает канвас
</canvas>	
</body>
</html>
